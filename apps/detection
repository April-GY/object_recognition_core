#!/usr/bin/env python
import roscompat
from object_recognition_core.pipelines.plasm import create_detection_plasm
from object_recognition_core.utils.training_detection_args import read_arguments_detector
import ecto

DEBUG = False

if __name__ == '__main__':
    source_params, pipeline_params, sink_params, voter_params, args = read_arguments_detector()
    plasm = create_detection_plasm(source_params, pipeline_params, sink_params, voter_params)
    if DEBUG:
        #render the DAG with dot
        ecto.view_plasm(plasm)

    sched = ecto.schedulers.Singlethreaded(plasm)
    sched.execute()
